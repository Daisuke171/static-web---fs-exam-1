---
import MainLayout from "../layout/MainLayout.astro";
import MovieCard from "../components/MovieCard.astro";

const API_KEY = "0310e4379c92147528b85ea519393186";
const response = await fetch(
  `https://api.themoviedb.org/3/movie/popular?api_key=${API_KEY}&language=es-ES`,
);
const { results: movies } = await response.json();
---

<MainLayout title="Movie Catalogue">
  <header class="headerCatalog">
    <h1 class="headerCatalog__title">Catalog of the movies</h1>
    <input
      type="text"
      class="headerCatalog__search"
      placeholder="Search for a movie"
    />
    <button class="headerCatalog__button">Search</button>
  </header>
  <div class="movieList">
    {
      movies.map((movie: {
        poster_path: string;
        title: string;
        vote_average: number;
      }) => (
        <MovieCard
          img={`https://image.tmdb.org/t/p/w500${movie.poster_path}`}
          title={movie.title}
          vote_average={movie.vote_average}
        />
      ))}
  </div>
  </MainLayout>

  <style>
    .headerCatalog {
      padding: 2.5rem 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: center;
    }

    .headerCatalog__title {
      font-size: 2rem;
      color: oklch(0.3441 0.1825 265.76);
      font-family: "Inter", sans-serif;
      font-weight: 600;
    }
    .headerCatalog__search {
      width: 100%;
      max-width: 350px;
      padding: 0.5rem;
      border-radius: 15px;
      border: 1px solid oklch(0.85 0.1 275);
      background-color: oklch(0.98 0.01 275);
      color: oklch(0.3441 0.1825 265.76);
    }
    .headerCatalog__search::placeholder {
      color: oklch(0.4655 0.0395 265.76);
    }

    .headerCatalog__button {
      padding: 0.5em 1em;
      border-radius: 15px;
      border: none;
      background-color: oklch(0.3441 0.1825 265.76);
      color: white;
      cursor: pointer;
    }
    .headerCatalog__button:hover {
      background-color: oklch(0.6673 0.1613 265.76);
    }

    .movieList {
      padding: 2rem;
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 2.5rem;
    }
  </style>
